# サイトを実装してみよう

この章では、企画書を元にラブライブ！募集サイトの HTML + CSS + JavaScript の実装をしてみます。

## 実装する際に必要となるツール

実装を始める前に、必要なツールを準備していきましょう。最低限必要なものを列挙していくと以下のものがあります。

- ソースコードを記すためのエディタ・IDE
- 表示確認用のブラウザ
- 作業履歴を記録するためのバージョン管理ソフト
- 書いたソースコードに対して細かな作業をやるためのツール

それでは、一つ一つ解説していきます。

### エディタ・IDE

ソースコードを書くために必要なエディタや IDE (統合開発環境)を始めに準備する必要があります。

エディタは Atom や Sublime Text がよく使われています。

IDE は WebStorm や NetBeans がよく使われています。また Windows であれば Visual Studio Community Edition がおすすめの IDE です。

### ブラウザ

次に、ソースコードを書いた後に確認するためのブラウザを準備します。Windows の場合は Microsoft Edge や Internet Explorer が、OS X の場合は Safari が最初からインストールされています。

しかし、それらのブラウザだけで確認をおこなえば良いかというとそうではなく、複数のブラウザで確認する必要があります。

他にインストールしておいたほうが良いブラウザは Google Chrome や Mozilla Firefox となります。できれば開発版をインストールしておくと、事前に次期バージョンでハマりそうな点が分かるためおすすめです。

### Git と GitHub

作業の履歴を適切に残しておくことで、いざという時にかなり前の作業履歴までさかのぼってしまうということが少なくなります。そのためのバージョン管理ソフトとして、Git と GitHub を使います。

Git は SourceTree をダウンロードして使うのが良いでしょう。もし Git についてあまり知らない場合は、拙著の Steins;Git を読んでみてください。

### 各種ツール

**ターミナル**

OS X の場合は最初からターミナルがインストールされているので、それを使うのが良いでしょう。Windows の場合は PowerShell と MinGW を組み合わせて使うと良いと思います。

なお、Windows を使っている人は以下の記事を見ながら PC の設定をしておくと、のちのち楽になると思います。

- [Windows - 開発者がSurfacePro3を買ったらまずやること - Qiita](http://qiita.com/tanakh/items/a1b4705fb58ef3c89800)
- [最近のWindowsの開発環境のセットアップ - 純粋関数空間](http://tanakh.jp/posts/2013-05-23-windows-setup.html)

ターミナルは「黒い画面」とも呼ばれ、時には恐れられる存在になりますが、以下に紹介する記事を見ていただければ、触りにくいという考えは多少は軽減されると思います。

- [Terminal - デザイン系フロントエンドエンジニアが「黒い画面」を使ってて良かったこと。 - Qiita](http://qiita.com/tokimari/items/43b89c832812ea2bd93f)
- [Webデザイナーの為の「本当は怖くない」”黒い画面”入門 Part.01 « 合同会社フィヨルド](http://fjord.jp/love/548.html)

**Node.js**

次に紹介する Gulp を使うために必要になります。公式サイトからダウンロードしてインストールするのが良いでしょう。

**Gulp**

また、実際にソースコードを書いていく上で、以下のことも求められます。

- 書いたソースコードが正しいか確認(構文チェック)
- ソースコードの権利を明確にするためにライセンス情報を足す
- サイトの表示高速化のためにソースコードを圧縮(minify)

このようなことを手動でおこなうこともできますが、大変骨が折れる作業です。

そこで、上記に挙げた作業を自動でおこなってくれる Gulp というツールを使います。

**Web Starter Kit**

しかし、Gulp を自分で一から使おうとすると、いろいろなことができるようになるまで骨が折れる作業になります。

そこで Google が公開している [Web Starter Kit](https://developers.google.com/web/tools/starter-kit/) を使いましょう。

使い方や開発方法などは、[Googleのベストプラクティスに沿ったモダンな製作の出発点「Web Starter Kit」 | HTML5Experts.jp](https://html5experts.jp/nakajmg/8931/) を参考にしてみてください。

## 分からないことがあった時には？

サイトの実装で分からないことがよく出てきます。そういった際、どのように解決していくかを書いていきます。

### ググる

まずは ググりましょう。ググる方法にも多く結果が出やすい手法があります。

#### ググるための言葉を区切る

例えば「CSSで背景色をつけるやり方」と検索した時よりも「CSS 背景色 やり方」で検索したほうが検索結果の件数が増えます。

検索エンジンは「CSSで背景色をつけるやり方」のような文章を受け付けるのがまだ苦手です。そのため、文章よりも単語ごとに区切ったほうが検索結果の件数が増えます。

#### 「○○ とは」で検索する

より入門的な内容を探したい場合は「○○ とは」で検索することをおすすめします。例えば「JavaScript とは」や「CSS とは」といった感じです。

だいたい「○○ とは」というタイトルで入門的な記事を書く傾向にあるため、このように検索したほうがより入門よりの記事が引っかかります。

#### エラーメッセージをそのまま検索する

何かしらを実行してそれが上手くいかなかった際に、表示されたエラーメッセージをそのまま検索すると、解決方法が出やすくなります。

しかし、だいたいは英語(そしてだいたいは Stack Overflow というサイト)なので、そこは頑張って内容を読み取るしかないです。

もし検索してでてきた内容が英語だったら、それを自分のブログに日本語の記事として掲載すると、後から検索した人が助かるかもしれません。また、自分にとっても記憶に残りやすくなるので良いと思います。

#### 期間を絞る

JavaScript の情報は2011年以前の情報はあまり役に立たないことが多いです。

そこで Google の検索ツールの「期間を指定」を使って、なるべく新しい情報のみを検索するようにします。

初期の状態では、一ヶ月前の検索結果の前がいきなり一年前と使い勝手がよくないです。

しかし [Add Search Options](https://chrome.google.com/webstore/detail/add-search-options/kaifgnoibnjldmdkkfogenbfbfgcbiao?hl=ja) という Google Chrome の拡張機能を使うことにより、期間指定に「三ヶ月以内」と「六ヶ月以内」が使えるようになります。

### 周りの人に聞く

検索をしても、あまり良い情報に巡りあえない場合があります。そういった場合、周りに聞ける環境であれば聞くのが良いでしょう。

聞き方としてはおそらく解答にかかるであろう時間を予測して「○○について聞きたいのですが、○分ほど時間ありますか？」と聞くのが良いでしょう。

また、相手の都合の良い時に返信してもらうように、できれば口頭でまず聞くのではなく、チャット上でメッセージを送信して反応してくれるのを待つというのが良いです。

その場合、15分くらいして、何も返信がなかったら口頭で聞くようにします。

### 本を読む

これはすぐに解答を得るという目的には使えないですが、自分の中に知識を貯めておくというのも重要です。

上から順に読んでいけば、仕事で JavaScript を触ることになっても十分に対処できると思います。

1. [ノンプログラマのためのJavaScriptはじめの一歩](http://amzn.to/1I8kjCe)
1. [開眼! JavaScript ―言語仕様から学ぶJavaScriptの本質](http://amzn.to/1CL5dCa)
1. [JavaScriptエンジニア養成読本](http://amzn.to/1fagUYl)
1. [JavaScriptパターン ―優れたアプリケーションのための作法](http://amzn.to/1LetyDz)
1. [Effective JavaScript](http://amzn.to/1Max5SF)

これらを踏まえて実装といきたいところですが、その前に注意点を書いていきます。

## 注意する点

実装の際、いくつか注意点があります。それをここでは書いていきます。

### ライセンス

まず始めに、ソースコードのライセンスについてです。GitHub 上にあるライブラリはだいたいライセンス情報が書かれたファイルが置かれています。

そのライセンスファイルが置かれていないものに関しては、使うのをやめましょう。

どんなライセンスが今後適用されるか分からないのと、作者の思いとして、再利用されたくないと思ってライセンスファイルを置いていない可能性があります。

またライセンスファイルが置かれていたとしても、GPL ライセンスの場合は自分で独自に改変をおこなったり、手を加えずに再配布する場合に、同じ GPL ライセンスで配布しないといけないので注意が必要です。

MIT ライセンスや修正 BSD ライセンスというものは、作者の名前を書いておけば問題にはなりません。

### 著作権

また、サイト上で使う画像についても注意が必要です。

[著作権法 第三十条](http://law.e-gov.go.jp/htmldata/S45/S45HO048.html#1000000000002000000003000000005000000000000000000000000000000000000000000000000)には、以下のような記述があります。

> 著作権の目的となつている著作物（以下この款において単に「著作物」という。）は、個人的に又は家庭内その他これに準ずる限られた範囲内において使用すること（以下「私的使用」という。）を目的とするときは、次に掲げる場合を除き、その使用する者が複製することができる。

例えば PC の壁紙として、著作権情報が載っている画像を使ったとしてもそれは問題になりません。

しかし、それをインターネット上などで公開するために使ってしまった場合、[著作権法　第二十三条](http://law.e-gov.go.jp/htmldata/S45/S45HO048.html#1000000000002000000003000000003000000000000000000000000000000000000000000000000)の公衆送信権を侵害することになります。

また、そのまま使わないにしろ、例えばイラストをトレースして自分流に編集して公開したとしても、それもまた問題になります。

この辺りの話は、[大人気ゲーム「刀剣乱舞」に「トレパク」疑惑が続々浮上――どんな問題があるのか？|弁護士ドットコムニュース](http://www.bengo4.com/houmu/17/1263/n_3282/)を見ると良いでしょう。

### イラストや素材を自作できない場合どうしたら良いか？

とはいえ、イラストや素材を自作できない場合、サイトを作る時に殺風景な見た目になりがちです。それでも、殺風景にならないためにはどうしたら良いでしょうか？

そのための案として、二つ提案できることがあります。

#### 写真や配色や隙間を上手く使う

まず一つ目は、写真や配色や隙間を上手く使って、見た目が簡素でもセンスが良いサイトを作ることです。まず思い浮かぶのは [Apple Japan](http://www.apple.com/jp/) のサイトです。サイトの要素的にはそこまで多くないですが、写真と隙間を上手く使って、かっこ良いという印象を生み出しています。

また [Nexus - Google](https://www.google.com/nexus/) も Apple と同じくそこまで多くない要素を、大きな写真や隙間や影を効果的に使ってやはりかっこ良いという印象があります。

しかし、写真の構図にこだわったり、隙間も変な風にならないように適切に使わないといけないため、簡単そうに見えますが、難易度は高いです。

#### 写真素材サイトを使う

二つ目は、写真素材サイトを使うことです。商用利用可かつ、クレジット表記が不要という写真素材サイトは多くあります。有名なサイトとして、[ぱくたそ](https://www.pakutaso.com/)があります。また女性向けの写真素材サイトとしては、[GIRLY DROP(ガーリードロップ)](http://girlydrop.com/) というサイトがあります。

またこういった「商用利用可かつ、クレジット表記が不要」というサイトを横断的に検索できる[タダピク](http://www.tadapic.com/)というサイトもあります。

このような写真素材サイトを使うことで、高品質な写真を自分が撮影することなく使うことができます。ただし、各写真素材サイトでは使用にあたっての注意が書かれているサイトがほとんどです。

写真素材を使う際は、その注意項目を読んだ上でそれに沿って使用するようにしてください。

## ライブラリ選定

いろいろと前提を踏まえた上で、ライブラリの選定をおこなっていきます。

選定の基準としては、各個人や企業でまちまちだとは思いますが、自分が気をつけているところを書いていきます。

### 利用実績

はじめに、そのライブラリが広く使われているかを見ます。例えば [Bootstrap](http://getbootstrap.com/) だと、ページ下部に Bootstrap を使って作られたサイト一覧が掲載されています。

また [jQuery](http://jquery.com/) については、[Amazon で jQuery で検索](http://www.amazon.co.jp/s/field-keywords=jquery)してみると、本が大量にでてきます。

このように、ライブラリの公式サイトに利用実績があるかどうかや、そのライブラリについて本が書かれているかということをまずは見ます。

### Issue と Pull Request と最新コミット日時

先ほどの利用実績のところで挙げた例は、公開されてからある程度時間が経過し、広く使われるようになったライブラリのみ使える判断材料です。

つまり、定番と言われるライブラリしか使えないということです。

ほとんどのライブラリは、まだ利用実績が掲載されていなかったり、本がでているということはありません。

なので定番と呼ばれるライブラリ以外は、GitHub 上の Issue や Pull Request の数と最新コミット日時を見ます。

Issue や Pull Request が多いということは開発がそれだけ活発ということかもしれません。

しかし、最新コミット日がある程度前の日にちだと Issue や Pull Request の多さは「放置されているから」ということになります。

なお、最新コミット日が三ヶ月前以上だと危険信号で、六ヶ月以上だと何らかの事象が起きない限りはそのライブラリは死んだと考えています。

### ソースコードの全体が把握できる、もしくは、ドキュメントが揃っている

次に、ソースコードの全体が把握しやすいか、もしくは、ドキュメントが揃っていてそれが読みやすいかどうかを見ます(もちろん両方揃っているのが好ましいです)。

例えば、ソースコードの全体が把握しやすいライブラリとしては、[Backbone.js](http://backbonejs.org/)が挙げられます。

ドキュメントもあり、機能について網羅はされているのですが、見やすいかというと少し疑問が生まれます。

しかし、[ソースコード](https://github.com/jashkenas/backbone/blob/master/backbone.js)はまとまりの単位が小さいため、1,877行(2015/7/10現在)あるとはいえ、全体を読もうと思えば読めなくはないものとなっています。

次に、ドキュメントが揃っていて読みやすい例としては、[jQuery](http://jquery.com/) が挙げられます。

ソースコード自体は [リポジトリの src ディレクトリ配下](https://github.com/jquery/jquery/tree/master/src)にまとまっており、機能ごとにまとまってはいるのですが、ファイル数が多く全体を把握しようとすると骨が折れます。

ただ、[ドキュメント](https://api.jquery.com/)が見やすくまとまっており、普段はソースコードを見なくてもどのように使うのか調べるのに困らないという状況になっています。

ちなみに、両方揃っている例としては [flipsnap.js](http://hokaccha.github.io/js-flipsnap/) が挙げられます。

flipsnap.js はドキュメントに、どういった環境に対応しているか、どのようにすれば動作するようになるか、使い方の例などがよくまとまっており、使いはじめるのにあれこれ調べなくてもドキュメント内で完結できるライブラリになっています。

また[ソースコード自体](https://github.com/hokaccha/js-flipsnap/blob/master/flipsnap.js)も、まとまりの単位が小さく、読みやすいものとなっています。

では、これらを踏まえた上で、実際に選定をおこなっていきましょう。

## ライブラリの選定 CSS 編

CSS を実装する際に使うライブラリとして、[Bootstrap](https://github.com/twbs/bootstrap) を使います。

Bootstrap は多くのサイトで使われています。理由としては、以下に挙げるものがあると思います。

- HTML に少し書き足して bootstrap.css を読みこめば、素の HTML と比較するとずっと良い見た目になるため
- [グリッド機能](http://getbootstrap.com/css/#grid)が使いやすい
- ブラウザ間の既定の CSS を良い感じに丸め込んでくれる [Normalize.css](http://necolas.github.io/normalize.css/) が使える

特にグリッド機能はある要素を横並びで表示させたいという時に役に立ちますが、狭いウインドウ幅のことも考えて実装するというのが地味に面倒です。

その点を Bootstrap 側で巻き取ってくれるというのは嬉しいです。

### Bootstrap のカスタマイズ

少し話は逸れますが、Bootstrap をそのままの状態で使うと、見た目が他と同じようなサイトができます。

しかし、自分の頑張り次第では Bootstrap を使っていると感じさせないサイトを作ることができます。

以下に Bootstrap を使っているとは感じさせないサイトの例を挙げます。これらのサイトを参考にして、より見た目の良いサイトを作ってみましょう。

- [Bootstrap Expo](http://expo.getbootstrap.com/)
- [STF | Smartphone Test Farm](https://openstf.github.io/)
- [pplog - ゆるふわインターネットにポエムを刻もう](https://pplog.net/)

## ライブラリの選定 JavaScript 編

今回 JavaScript 側で実現する必要がある機能は「カルーセル」があります。

「カルーセル」は [Nike](http://www.nike.com/jp/ja_jp/) などで使われている「注目させたい複数の画像を次々に横にスライドさせて表示させる」ものです。

このカルーセルを実現するために、今回は [lory](http://meandmax.github.io/lory/) というライブラリを使います。この lory というライブラリを選んだ理由は以下の通りです。

- 外部のライブラリに依存せず、lory だけを読みこめばそれでカルーセルが実装することができる
- ライブラリのソースコードの全体が把握しやすい([2015/7/10現在で520行](https://github.com/meandmax/lory/blob/73244bb780e0214d7c4b446d27295a80c6872bd0/dist/lory.js))

なお、次々に横にスライドさせて表示させる際に、最後まで到達した時にまた最初まで戻る、無限ループがいらなければ [flipsnap.js](http://hokaccha.github.io/js-flipsnap/) もおすすめです。

また jQuery に依存するライブラリでは [slick](http://kenwheeler.github.io/slick/) や [Owl Carousel](http://owlgraphic.com/owlcarousel/) がよく使われます。

ライブラリの選定が終わったので、サイトの実装をしていきます。
