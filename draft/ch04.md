## CSS で見た目を良くする

CSS を使って、HTML でマークアップしたサイトの見た目を良くしていきます。

### 準備

まず始めに、HTML 側で CSS ファイルを読み込むようにします。とはいえ、実はもう読み込むようになっています。

それが head 要素内に書いた、以下の記述です。これは Bootstrap と自分が独自に書いた CSS を読み込むような記述になっています。

あとは HTML ファイルを置いたフォルダと同じフォルダに styles というフォルダを作って、その中に bootstrap.min.css と main.css を置けば CSS ファイルが読み込まれます。

```html
<link rel="stylesheet" href="styles/bootstrap.min.css">
<link rel="stylesheet" href="styles/main.css">
```

### なぜ HTML とは別ファイルにするのか

CSS には HTML を書くファイル以外に別途ファイルを作って CSS を書く他に、CSS を書ける方法が二つあります。

それは、HTML 内で style 要素を定義してその中に CSS を書いていく(style 要素)方法と、HTML の要素に style 属性を定義してその中に CSS を書いていく(インライン style 属性)方法があります。

HTML 内で style 要素を定義してその中に CSS を書いていく(style 要素)方法の例は以下の通りです。

```html
<style>
    p {
        color: red;
    }
</style>
```

HTML の要素に style 属性を定義してその中に CSS を書いていく(インライン style 属性)方法の例は以下の通りです。

```html
<p style="color: red;">テスト</p>
```

この中でも CSS を外部ファイル化することが最良な理由としては、二点理由があります。

まず始めに、各ページに link 要素で CSS ファイルを読みこませれば、サイト全体の見た目を変えたいと思った時に CSS ファイルだけを差し替えれば変えられることです。つまり、メンテナンス効率が上がります。

次に、サイト全体の表現を統一しやすいことです。例えば各ページで style 要素内に CSS を書いていく場合、どのページでどのような CSS を書いたか忘れてしまった場合、表現が統一されなくなる確率が高くなります。その点 CSS を別のファイルにして、その中でのみ CSS を書くようにすれば、サイト全体の表現が統一されやすくなります。

### プロパティと値

CSS では「プロパティ」が「適用させたいスタイル」を示し「値」は「実際に適用させる値」を指します。具体例をソースコードで示すと以下の通りです。

```css
.test {
    /* プロパティ: 値 */
    /* 背景色: 白 */
    background-color: #fff;
}
```

### セレクタについて

セレクタとは「HTML 内の特定の要素に合致するパターン」のことを指します。[セレクタ Level 3 の 2. セレクタ](http://standards.mitsue.co.jp/resources/w3c/TR/css3-selectors/#selectors)を見ると分かるように多種多様なセレクタがあります。

しかし、よく使うものは限られてます。ここでは、そのよく使う以下のセレクタについて解説していきます。

- 要素セレクタ
- ID セレクタ
- クラスセレクタ
- 子孫セレクタ
- 子セレクタ
- ユーザーアクション擬似クラス

#### 要素セレクタ

指定した要素があるかどうか探してスタイルを適用するものです。

```css
/* 全ての p 要素 */
p {
    color: #333;
}

/* 全ての h1 要素 */
h1 {
    font-size: 16px;
}
```

#### ID セレクタ

HTML 内で id 属性を指定した要素に対してスタイルを適用するものです。なお、同一の HTML ファイル内では、同じ id 属性の値を指定することはできません。

以下の HTML の例だと、`global-header` と `site-title` という ID は他のところでは使えないということになります。

```html
<header id="global-header">
    <h1 id="site-title">テストテスト</h1>
</header>
```

```css
#global-header {
    background-color: #ccc;
}

#site-title {
    color: #333;
}
```

#### クラスセレクタ

HTML 内で class 属性を指定した要素に対してスタイルを適用するものです。ID セレクタとは違い、同一の HTML ファイル内で同じ class 属性の値を指定することができます。

```html
<div class="nav-bar"></div>
```

```css
.nav-bar {
    background-color: #ccc;
}
```

#### 子孫セレクタ

子孫要素に対してスタイルを適用するものです。まず子孫要素について説明します。

例えば、以下のような HTML があったとします。この場合 `nav-bar` という値が指定されている class 属性が指定されている div 要素から見て、ul 要素は子要素の関係となります。そして、li 要素は孫要素の関係になります。li 要素の中にある a 要素については曾孫要素になります。

```html
<div class="nav-bar">
    <ul>
        <li><a href="/">トップ</a></li>
        <li><a href="livestage.html">ライブステージ</a></li>
    </ul>
</div>
```

では、この時に li 要素にのみ文字色を赤にするようなスタイルを適用したいとなった時はどうしたら良いでしょうか？答えは以下のように書きます。

以下の CSS は「.nav-bar の 子要素である ul 要素内にある li 要素に対して、文字色を赤にする」という指定をおこなっています。

```css
.nav-bar ul li {
    color: red;
}
```

#### 子セレクタ

子要素に対してスタイルを適用するものです。

先ほどの指定だと `nav-bar` という値が指定されている class 属性の孫要素の li 要素全てにスタイルが適用されていました。

しかし、例えば以下の HTML にあるように li 要素の孫要素の li 要素は文字色を赤くしたくないと思ったとします。

```html
<div class="nav-bar">
    <ul>
        <li><a href="/">トップ</a></li>
        <li>
            <a href="livestage.html">ライブステージ</a>
            <ul>
                <li><a href="muse.html">μ's</a></li>
                <li><a href="arise.html">A-RISE</a></li>
            </ul>
        </li>
    </ul>
</div>
```

この場合、以下のように ul と li を結合する文字を半角スペースから大なり括弧に変えると、トップとライブステージという部分だけ文字色が赤くなります。

```css
.nav-bar ul > li {
    color: red;
}
```

#### ユーザーアクション擬似クラス

サイトの利用者がおこなった行動に対して、スタイルを適用するものです。`:hover`, `:active`, `:focus` があります。

`:hover` はある要素をマウスカーソルなどで示した場合に適用されるものです。例えば、リンクを示す文字列をマウスカーソルで指した場合に、文字色を変えてその要素が今指されているということを利用者に示したりします。

`:active` はある要素を選択した時に適用されます。例えば、マウスカーソルである要素を選択して、マウスから指を離すまでは `:active` で指定されたスタイルが適用されます。

`:focus` はある要素を選択した時に適用されます。`:active` と同じ概要になってしまいますが、違うところは、例えば入力フォームを選択した時にスタイルが適用されたり、キーボードで tab キーを押して、リンクを選択した時にスタイルが適用されるということです。

### スタイル適用の優先度

スタイルの適用には優先度があります。優先度の決め方は、セレクタの数や種類によって決まります。

[6.4.3 セレクタの詳細度を計算する](http://momdo.github.io/css2/cascade.html#specificity) にあるように、以下の計算をします。

- style 属性の数を「a」として数える
- ID セレクタの数を「b」として数える
- セレクタの中のクラスセレクタ(.foo)、属性セレクタ([id="foo"] など)、擬似クラス(:hover, :active など)の数を「c」として数える
- 型セレクタ(要素そのものを指定する)、擬似要素(::before, ::after など)の数を「d」として数える

難しそうに思えますが「要素に指定された style 属性が強く、その次に ID セレクタが強い」ということを覚えておけばだいたいなんとかなります(そしてこの二つはむやみやたらに書いてはいけないものというのが分かると思います)。

なお「!important」というものを書くと、この優先度は関係なくなり「!important」が指定されたスタイルが適用されます。

### 悪いクラス名の名付け方

今回は Bootstrap を使っているので、基本的には HTML の要素に Bootstrap で定義されているクラス名を付けていけば良いです。

しかし、独自に見た目を調整したい場合は HTML の要素に独自のクラス名を付けて、CSS 側でスタイル定義をおこなう必要があります。

この際のクラス名の付け方として、良くないクラス名の付け方というものがあります。

例えば、文字の色を赤くしたいと思って、以下のような CSS を書いたとします。

```css
.red {
    color: red;
}
```

しかし、これだと style 属性で `<div style="color: red">テスト</div>` みたいに書くのと大差ありません。また、赤ではなく黄色くしたいと思った時に CSS のクラス名ごと `.red` から `.yellow` に書き換える手間が発生します。そして、以下のようになったりします。

```css
.red {
    color: yellow;
}
```

そのため、この場合で言うのであれば「なぜ文字色を赤くしたかったのか」を考え、それがエラーということを伝えたいということであれば、以下のようにクラス名を付けるのが良いでしょう。

```css
.error {
    color: red;
}
```

### 良いクラス名の名付け方

では、良いクラス名とはなんでしょうか？

今回 HTML のクラス名の名付け方として [MindBEMding](http://blog.ruedap.com/2013/10/29/block-element-modifier) という考えかたを採用しています。

これはサイトを構成するそれぞれの要素を独立させて、将来的な仕様変更にもなるべく容易に応えられるように取り入れたものです。

通常 MindBEMding はセレクタ名を以下のように書きます。

```css
.block__element--modifier {
    /* スタイル定義がここに入る */
}
```

block にあたる部分は、例えば検索フォームであれば「検索窓と検索するボタンを囲む要素」を指します。element にあたる部分はそれぞれ「検索窓」と「検索するボタン」を指します。modifier にあたる部分は基本の検索フォームからは少し違う見た目を指します。
