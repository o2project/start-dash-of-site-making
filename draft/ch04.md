# CSS で Web サイトの見た目を良くする

この章では、HTML でマークアップしたサイトの見た目を CSS で整えます。

## 準備

はじめに、HTML 側で CSS ファイルを読み込みます。しかし、実はもう読み込むようになっています。

それが head 要素内に書いた以下の記述です。これは Bootstrap と自分が書いた CSS を読み込んでいることになります。

```html
<link rel="stylesheet" href="styles/bootstrap.min.css">
<link rel="stylesheet" href="styles/main.css">
```

HTML ファイルが置かれているフォルダに styles というフォルダを作ります。その中に bootstrap.min.css と main.css を置けば CSS ファイルが読み込まれます。

## なぜ HTML とは別ファイルにするのか

CSS は 別途 CSS ファイルを読み込ませる以外に、2つ用意する方法があります。

1つめが HTML 内で style 要素を定義する方法です。2つめが HTML の要素に style 属性を定義する方法です。

HTML 内で style 要素を定義する例:

```html
<style>
    p {
        color: red;
    }
</style>
```

HTML の要素に style 属性を定義する例:

```html
<p style="color: red;">テスト</p>
```

いくつか方法はある中で、CSS ファイルを読みこませる方法が最良な理由として、2つあります。

1つめは、文書構造と見た目の定義を分離させることです。特に style 属性でスタイル定義をした場合、HTML 内に見た目の定義も混ざってしまいます。

CSS を別ファイルにすることで、文書構造と見た目の定義が分離でき、管理しやすくなります。

次に、サイト全体の表現を統一しやすいことです。

たとえば各ページで style 要素内へ CSS を書く場合について考えます。この場合、各ページでスタイル定義の不統一になる確率が高くなります。

## プロパティと値

CSS では「プロパティ」が「適用するスタイル」を示し「値」は「適用する値」です。具体例をソースコードで示すと以下の通りです。

```css
.test {
    /* プロパティ: 値 */
    /* 背景色: 白 */
    background-color: #fff;
}
```

## セレクタについて

セレクタとは HTML 内の特定要素に合致するパターンを指します。[セレクタ Level 3 の 2. セレクタ](http://standards.mitsue.co.jp/resources/w3c/TR/css3-selectors/#selectors)を見ると分かるように多種多様なセレクタがあります。

しかし、よく使うものは限られてます。ここでは、そのよく使う以下のセレクタについて解説していきます。

- 要素セレクタ
- ID セレクタ
- クラスセレクタ
- 子孫セレクタ
- 子セレクタ
- ユーザーアクション擬似クラス

## 要素セレクタ

指定した要素があるか探してスタイルを適用するものです。

```css
/* 全ての p 要素 */
p {
    color: #333;
}

/* 全ての h1 要素 */
h1 {
    font-size: 16px;
}
```

## ID セレクタ

id 属性が指定された HTML の要素に対し、スタイルを適用するものです。なお、id 属性の値は一意となります。

id 属性を指定した要素へ、スタイル適用する例が次の例です。

```html
<header id="global-header">
    <h1 id="site-title">テストテスト</h1>
</header>
```

```css
#global-header {
    background-color: #ccc;
}

#site-title {
    color: #333;
}
```

## クラスセレクタ

class 属性が指定された HTML の要素に対し、スタイルを適用するものです。ID セレクタとは違い、同じ HTML 内で同じ class 属性の値を指定することができます。

```html
<div class="nav-bar"></div>
```

```css
.nav-bar {
    background-color: #ccc;
}
```

## 子孫セレクタ

子孫要素に対してスタイルを適用するものです。まず子孫要素について説明します。

たとえば、次の HTML があったとします。

```html
<div class="nav-bar">
    <ul>
        <li><a href="/">トップ</a></li>
        <li><a href="livestage.html">ライブステージ</a></li>
    </ul>
</div>
```

この場合 `nav-bar` という値の class 属性を指定している div 要素からすると、ul 要素は子要素になります。また、li 要素は孫要素の関係になります。li 要素内の a 要素は曾孫要素になります。

この時、li 要素の文字色を赤にしたい時はどうしたら良いでしょうか？答えは次のように書きます。

```css
.nav-bar li {
    color: red;
}
```

前述した CSS は、文字色を赤にするよう定義しています。適用対象は `nav-bar` というクラスが指定されている `div` 要素の子要素である `li` 要素になります。

## 子セレクタ

子要素のみに限定してスタイルを適用するものです。

たとえば次の HTML 内にある `li` 要素全てへ対しては文字色を変更したくないという要望が来たとします。

```html
<div class="nav-bar">
    <ul>
        <li><a href="/">トップ</a></li>
        <li>
            <a href="livestage.html">ライブステージ</a>
            <ul>
                <li><a href="muse.html">μ's</a></li>
                <li><a href="arise.html">A-RISE</a></li>
            </ul>
        </li>
    </ul>
</div>
```

この場合、次のように大なり括弧で `li` 要素を指定すれば、トップとライブステージだけ文字色が赤くなります。

```css
.nav-bar ul > li {
    color: red;
}
```

## ユーザーアクション擬似クラス

サイトの利用者がおこなった行動に対して、スタイルを適用するものです。`:hover`, `:active`, `:focus` があります。

`:hover` はある要素をマウスカーソルなどで示した場合に適用されるものです。

例えば、リンクをマウスカーソルで指したとします。この場合、文字色の変更などで、その要素をいま指しているということが示せます。

`:active` はある要素を選択した時に適用されます。

例えば、マウスカーソルである要素を選択したとします。この場合、マウスから指を離すまでは `:active` で指定されたスタイルが適用されます。

`:focus` はある要素を選択した時に適用されます。

`:active` と違うところは、入力フォームを選択した時にスタイルが適用されます。また、キーボードの tab キーでリンクを選択した時にスタイルが適用されるということです。

## スタイル適用の優先度

スタイルの適用には優先度があります。優先度は、定義されているセレクタの数や種類によって決まります。

- style 属性の数を「a」として数える
- ID セレクタの数を「b」として数える
- セレクタ内のクラスセレクタ(.foo)、属性セレクタ([id="foo"] など)、擬似クラス(:hover, :active など)の数を「c」として数える
- 型セレクタ(要素そのものを指定する)、擬似要素(::before, ::after など)の数は「d」として数える

この中でも、style 属性が1番強く、ID セレクタはその次に強いということを覚えておけばなんとかなります。

なお `!important` を書くと、この優先度は関係なくなります。`!important` は強力すぎるため、限られた場所のみ使うのがいいでしょう。
